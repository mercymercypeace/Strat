local Halloween = loadstring(game:HttpGet("https://raw.githubusercontent.com/mercymercypeace/Strat/refs/heads/main/custom%20gui"))()

local players = game:GetService("Players")

getgenv().Speed = 16
getgenv().Enabled = false

local function bypassWalkSpeed()
    if getgenv().executed then
        if not getgenv().Enabled then
            return
        end
    else
        getgenv().executed = true
        print("walkspeed bypassed lol")

        local mt = getrawmetatable(game)
        setreadonly(mt, false)

        local oldindex = mt.__index
        mt.__index = newcclosure(function(self, b)
            if b == 'WalkSpeed' then
                return 16
            end
            return oldindex(self, b)
        end)
    end
end

local win = Halloween:CreateWindow({
    Title = "halloween gui " .. Halloween.Version,
    SubTitle = "made by me lol",
    TabWidth = 160,
    Size = UDim2.fromOffset(580, 460),
})

local tabs = {
    main = win:AddTab({Title = "main", Icon = ""}),
    settings = win:AddTab({Title = "settings", Icon = ""})
}

Halloween:Notify({
    Title = "yoo",
    Content = "script loaded successfully",
    SubContent = "mobile support added",
    Duration = 5
})

tabs.main:AddParagraph({
    Title = "welcome",
    Content = "drag the titlebar to move\ndrag bottom right corner to resize\nworks on mobile too lmao"
})

tabs.main:AddButton({
    Title = "test button",
    Description = "opens a dialog thing",
    Callback = function()
        win:Dialog({
            Title = "hey",
            Content = "this is a test dialog or whatever",
            Buttons = {
                {
                    Title = "ok cool",
                    Callback = function()
                        print("clicked ok")
                    end
                },
                {
                    Title = "nah",
                    Callback = function()
                        print("clicked nah")
                    end
                }
            }
        })
    end
})

local speedToggle = tabs.main:AddToggle("speedtoggle", {
    Title = "enable speed hack",
    Default = false
})

speedToggle:OnChanged(function(val)
    getgenv().Enabled = val
    
    if val then
        bypassWalkSpeed()
        
        task.spawn(function()
            while getgenv().Enabled and task.wait() do
                local char = players.LocalPlayer.Character
                if char and char:FindFirstChild("Humanoid") then
                    char.Humanoid.WalkSpeed = getgenv().Speed
                end
            end
        end)
        
        print("speed hack on")
    else
        local char = players.LocalPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.WalkSpeed = 16
        end
        print("speed hack off")
    end
end)

local speedSlider = tabs.main:AddSlider("speedslider", {
    Title = "walk speed",
    Description = "set ur speed",
    Default = 16,
    Min = 16,
    Max = 200,
    Rounding = 1,
    Callback = function(val)
        getgenv().Speed = val
        
        if getgenv().Enabled then
            local char = players.LocalPlayer.Character
            if char and char:FindFirstChild("Humanoid") then
                char.Humanoid.WalkSpeed = val
            end
        end
    end
})

speedSlider:OnChanged(function(val)
    print("speed:", val)
end)

players.LocalPlayer.CharacterAdded:Connect(function(char)
    if getgenv().Enabled then
        bypassWalkSpeed()
        local hum = char:WaitForChild("Humanoid")
        task.wait(0.1)
        hum.WalkSpeed = getgenv().Speed
    end
end)

tabs.main:AddButton({
    Title = "ðŸŽƒ reset speed",
    Description = "back to normal",
    Callback = function()
        getgenv().Speed = 16
        getgenv().Enabled = false
        Halloween.Options.speedslider:SetValue(16)
        Halloween.Options.speedtoggle:SetValue(false)
        local char = players.LocalPlayer.Character
        if char and char:FindFirstChild("Humanoid") then
            char.Humanoid.WalkSpeed = 16
        end
        print("reset")
    end
})

local dropdown = tabs.main:AddDropdown("dropdown1", {
    Title = "pick something",
    Values = {"option 1", "option 2", "option 3", "option 4"},
    Multi = false,
    Default = 1,
})

dropdown:OnChanged(function(val)
    print("picked:", val)
end)

local input = tabs.main:AddInput("inputbox", {
    Title = "username",
    Default = "roblox",
    Placeholder = "type here...",
    Numeric = false,
    Finished = false,
    Callback = function(val)
        print("typed:", val)
    end
})

input:OnChanged(function()
    print("updated:", input.Value)
end)

local color = tabs.main:AddColorpicker("colorpick", {
    Title = "theme color",
    Default = Color3.fromRGB(255, 140, 0)
})

color:OnChanged(function()
    print("color changed")
end)

tabs.settings:AddParagraph({
    Title = "settings",
    Content = "change ur keybinds and stuff here"
})

local minimizeKey = tabs.settings:AddKeybind("minimizekey", {
    Title = "ðŸŽƒ minimize gui",
    Mode = "Toggle",
    Default = "RightShift",
    Callback = function()
        win.ToggleMinimize()
    end,
    ChangedCallback = function(new)
        print("minimize key:", new)
    end
})

minimizeKey:OnClick(function()
    print("minimized:", win.Minimized())
end)

local toggleKey = tabs.settings:AddKeybind("toggleui", {
    Title = "ðŸ‘» toggle ui",
    Mode = "Toggle",
    Default = "LeftControl",
    Callback = function(val)
        win.MainFrame.Visible = val
    end,
    ChangedCallback = function(new)
        print("toggle key:", new)
    end
})

toggleKey:OnClick(function()
    print("toggled:", toggleKey:GetState())
end)

tabs.settings:AddButton({
    Title = "ðŸŽƒ minimize",
    Description = "minimize the gui",
    Callback = function()
        win.ToggleMinimize()
    end
})

tabs.settings:AddToggle("notifs", {
    Title = "notifications",
    Default = true
})

tabs.settings:AddButton({
    Title = "test notif",
    Description = "sends test notification",
    Callback = function()
        if Halloween.Options.notifs.Value then
            Halloween:Notify({
                Title = "test",
                Content = "this is a test",
                Duration = 3
            })
        else
            print("notifs off")
        end
    end
})

tabs.settings:AddButton({
    Title = "ðŸ’€ destroy gui",
    Description = "removes gui",
    Callback = function()
        win.ScreenGui:Destroy()
        print("destroyed")
    end
})

win:SelectTab(1)

Halloween:Notify({
    Title = "ready",
    Content = "loaded successfully",
    SubContent = "have fun lol",
    Duration = 3
})
